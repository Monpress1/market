<%- include('../partials/header'); -%>
<%- include('../partials/navbar'); -%>

<div class="container">

  <div class="p-2 d-flex justify-content-between">
    <h1>Cart</h1>

    <% if(carts.length == 0) {%>
      <p>You have no items in your cart</p>
    <div class="row justify-content-center">
      <p></p>
    </div>
    <% }else{ %>

    <% if(carts.length> 0) {%>
    <div class="p-2">
      <a href="/order/checkout" class="btn btn-primary" type="submit">Checkout</a>
    </div>
    <% } %>
  </div>


  <div class="row justify-content-md-center">
    <table class="table table-hover">
      <% for(var i=0; i < carts.length; i++) { %>

      <tr>
        <% if(carts[i].product.ProductImage.length > 0) {%>
        <td>
          <img src="/uploads/products/<%= carts[i].product.ProductImage[0].url %>" alt="<%= carts[i].product.name %>" width="100" height="100">
        </td>
        <% }%>
        <td>
          <div class="d-flex justify-content-between">
            <h3> <a href="/product/<%= carts[i].product.id %>">
                <%= carts[i].product.name %>
              </a></h3>

            <form action="/cart/<%= carts[i].id %>/delete" method="post">
              <button type="submit" class="btn btn-danger">Delete</button>
            </form>

          </div>

          <p>Price: <%= carts[i].product.price %>
          </p>
          <p>Quantity: <%= carts[i].quantity %>
          </p>
          <p>Total: <%= carts[i].product.price*carts[i].quantity %>
          </p>
        </td>

      </tr>

      <% } %>
    </table>

  </div>


  <% if(carts.length> 0) {%>
  <div class="h-100 d-flex align-items-center justify-content-center">
    <a href="/order/checkout" class="btn btn-primary" type="submit">Checkout</a>
  </div>
  <% } %>

  <% } %>

</div>

<%- include('../partials/footer'); -%>